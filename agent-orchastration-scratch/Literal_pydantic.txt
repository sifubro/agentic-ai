https://chatgpt.com/c/6928a49a-e490-832b-8c88-4c5258cca5cc#
https://chatgpt.com/c/6928a49a-e490-832b-8c88-4c5258cca5cc#
https://chatgpt.com/c/6928a49a-e490-832b-8c88-4c5258cca5cc#



â­ 3. How to Design Agent Tools to Maximize Correctness

Below are my best practices based on deep experience with agent systems.

ğŸ§© Rule 1 â€” Use Literal Everywhere Possible

Example:

topic: Literal["general", "news", "finance"]


Why it works:

Converts into "enum" in JSON schema

Strong token bias for LLM

Prevents hallucinated new categories

Enables self-correction loops

This alone reduces tool-call errors by 40â€“80%.

ğŸ§© Rule 2 â€” Replace Strings with Enums or Literals

Never use:

category: str


Always use:

category: Literal["A", "B", "C"]


Or:

from enum import Enum

class Category(str, Enum):
    A = "A"
    B = "B"
    C = "C"


LLMs love bounded choices.

ğŸ§© Rule 3 â€” Avoid Nested Freeform JSON

Bad:

filters: dict


Better:

class Filters(BaseModel):
    min_price: Optional[int]
    max_price: Optional[int]
    category: Literal["tech", "home", "fashion"]


Structure beats flexibility.

ğŸ§© Rule 4 â€” Keep Tools Atomic

Each tool should do exactly ONE thing.

Good tools:

get_weather

search_news

send_email

calculate_distance

Bad tool:

do_everything(user_query)

Atomic tools â†’ less model confusion â†’ more correctness.

ğŸ§© Rule 5 â€” Avoid Ambiguity in Arguments

Example:
Bad:

sort: str


Good:

sort: Literal["asc", "desc"]


Or:

sort: Literal["price_low_to_high", "price_high_to_low", "newest_first"]


The more specific the schema, the fewer the errors.

ğŸ§© Rule 6 â€” Use â€œImplicit Defaultsâ€ to Prevent Missing Fields
limit: int = 10
topic: Literal["general", "news", "finance"] = "general"


Defaults prevent the model from forgetting required arguments.

ğŸ§© Rule 7 â€” Avoid Mixing Tool Calls and Natural Language

Provide tools in clean, isolated schemas without requiring prompt gymnastics.

Let the agent system decide.



















âœ” Literal â€” restricts values to exact allowed options
âœ” Enum â€” adds structure and symbolic names
âœ” Field() â€” adds numeric, length, pattern constraints
âœ” field_validator â€” adds semantic, custom business rules